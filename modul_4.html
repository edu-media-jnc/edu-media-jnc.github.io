<!DOCTYPE html>
<html lang="en">
<head>
     <title>Edu Media 24</title>
     <meta charset="UTF-8">
     <meta http-equiv="X-UA-Compatible" content="IE=Edge">
     <meta name="description" content="">
     <meta name="keywords" content="">
     <meta name="author" content="">
     <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
     <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
     <link rel="icon" type="image/x-icon" href="images/smpn24ppu.png" />
     <link rel="stylesheet" href="css/bootstrap.min.css">
     <link rel="stylesheet" href="css/magnific-popup.css">
     <link rel="stylesheet" href="css/font-awesome.min.css">
     <link rel="stylesheet" href="css/templatemo-style.css">
</head>
<body>
     <section class="preloader">
          <div class="spinner">
               <span class="spinner-rotate"></span>
          </div>
     </section>
     <section class="navbar custom-navbar navbar-fixed-top" role="navigation">
          <div class="container">
               <div class="navbar-header">
                    <button class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                         <span class="icon icon-bar"></span>
                         <span class="icon icon-bar"></span>
                         <span class="icon icon-bar"></span>
                    </button>
                   <a href="index.html" class="navbar-brand" style="display: flex; align-items: center; padding-top: 10px; padding-bottom: 10px;">
                      <img src="images/smpn24ppu.png" alt="Logo" 
                           style="height: 40px; margin-right: 8px; vertical-align: middle;">
                      <span>Edu Media 24</span>
                    </a>
               </div>
               <!-- MENU LINKS -->
               <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-nav-first">
                         <li><a href="index.html" class="smoothScroll">Home</a></li>
                         <li><a href="index.html#about" class="smoothScroll">About</a></li>
                         <li><a href="index.html#portfolio" class="smoothScroll">Portfolio</a></li>
                         <li><a href="index.html#services" class="smoothScroll">Services</a></li>
                         <li><a href="index.html#contact" class="smoothScroll">Contacts</a></li>
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                         <li><a href="#"><i class="fa fa-facebook-square"></i></a></li>
                         <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                         <li><a href="#"><i class="fa fa-instagram"></i></a></li>
                         <li class="section-btn"><a href="#" data-toggle="modal" data-target="#modal-form">Sign in </a></li>
                    </ul>
               </div>
          </div>
     </section>

     <section id="portfolio-header" data-stellar-background-ratio="0.5">
          <div class="overlay"></div>
     </section>

     <section id="portfolio-detail" data-stellar-background-ratio="0.5">
       <div class="container">
         <div class="row">
           <div class="col-md-offset-1 col-md-10 col-sm-12">
             <h2 class="text-center">ðŸ“˜ Dokumentasi & Prestasi</h2>
             <div class="table-responsive">
               <table id="dokumentasiTable" class="table table-bordered table-striped">
                 <thead class="thead-dark">
                   <tr class="text-center">
                     <th>No</th>
                     <th>Nama Dokumen</th>
                     <th>Deskripsi</th>
                     <th>Foto</th>
                   </tr>
                 </thead>
                 <tbody id="dokumentasiBody">
                      <tr><td colspan="4" class="text-center">Loading...</td></tr>
                 </tbody>
               </table>
             </div>
           </div>
         </div>
       </div>
     </section>


     <!-- FOOTER -->
     <footer data-stellar-background-ratio="0.5" style="background:#222; color:#fff; padding:40px 0;">
       <div class="container">
         <div class="row">

           <!-- Info -->
           <div class="col-md-5 col-sm-12">
             <div class="footer-thumb footer-info"> 
               <h2>Edu Media 24</h2>
               <p></p>
             </div>
           </div>

           <!-- Quick Links -->
           <div class="col-md-2 col-sm-4"> 
             <div class="footer-thumb"> 
               <h2>Quick Links</h2>
               <ul class="footer-link">
                 <li><a href="index.html#about">About</a></li>
                 <li><a href="index.html#portfolio">Portfolio</a></li>
                 <li><a href="index.html#services">Services</a></li>
                 <li><a href="index.html#contact">Contact</a></li>
               </ul>
             </div>
           </div>

           <!-- Services -->
           <div class="col-md-2 col-sm-4"> 
             <div class="footer-thumb"> 
               <h2>Services</h2>
               <ul class="footer-link">
                 <li><a href="#">Learning Media</a></li>
                 <li><a href="#">Workshops & Training</a></li>
                 <li><a href="#">Consultation</a></li>
               </ul>
             </div>
           </div>

           <!-- Contact -->
           <div class="col-md-3 col-sm-4"> 
             <div class="footer-thumb"> 
               <h2>Contact Us</h2>
               <p>SMP Negeri 24 Penajam Paser Utara <br>Bukit Subur, Penajam, East Kalimantan</p>
               <p></p>
               <p></p>
             </div>
           </div>                    

           <!-- Bottom -->
           <div class="col-md-12 col-sm-12">
             <div class="footer-bottom" style="border-top:1px solid #444; margin-top:20px; padding-top:15px;">
               <div class="col-md-6 col-sm-6">
                 <div class="copyright-text"> 
                   <p>Copyright &copy; 2025 Edu Media 24. All rights reserved.</p>
                 </div>
               </div>
               <div class="col-md-6 col-sm-6 text-right">
                 <ul class="social-icon" style="list-style:none; margin:0; padding:0;">
                   <li style="display:inline-block; margin:0 5px;">
                     <a href="https://www.facebook.com" class="fa fa-facebook-square" target="_blank"></a>
                   </li>
                   <li style="display:inline-block; margin:0 5px;">
                     <a href="https://twitter.com" class="fa fa-twitter" target="_blank"></a>
                   </li>
                   <li style="display:inline-block; margin:0 5px;">
                     <a href="https://instagram.com" class="fa fa-instagram" target="_blank"></a>
                   </li>
                   <li style="display:inline-block; margin:0 5px;">
                     <a href="https://youtube.com" class="fa fa-youtube-play" target="_blank"></a>
                   </li>
                 </ul>
               </div>
             </div>
           </div>
         </div>
       </div>
     </footer>

     <!-- MODAL -->
     <section class="modal fade" id="modal-form" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
       <div class="modal-dialog modal-md">
         <div class="modal-content modal-popup">
           <div class="modal-header">
             <button type="button" class="close" data-dismiss="modal" aria-label="Close">
               <span aria-hidden="true">&times;</span>
             </button>
           </div>
           <div class="modal-body">
             <div class="container-fluid">
               <div class="row">
                 <div class="col-md-12 col-sm-12">
                   <div class="modal-title">
                     <h2>Edu Media 24</h2>
                      <ul class="nav nav-tabs" role="tablist">
                         <li><a href="#sign_in" aria-controls="sign_in" role="tab" data-toggle="tab">Sign In</a></li>
                      </ul>
                   </div>
                   <form id="loginForm" action="#" method="post">
                     <input type="email" class="form-control" name="email" placeholder="Email" required>
                     <input type="password" class="form-control" name="password" placeholder="Password" required>
                     <input type="submit" class="form-control" name="submit" value="Sign In">
                   </form>
                 </div>
               </div>
             </div>
           </div>
         </div>
       </div>
     </section>
     <script src="js/jquery.js"></script>
     <script src="js/bootstrap.min.js"></script>
     <script src="js/jquery.stellar.min.js"></script>
     <script src="js/jquery.magnific-popup.min.js"></script>
     <script src="js/smoothscroll.js"></script>
     <script src="js/custom.js"></script>
     <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
     <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
     <script>
     const sheetURL = "https://opensheet.elk.sh/1HufG5kPt35_t_vdSoDIdoZ3GtZEtUnYw8tiNe_e2Ui0/Dokumentasi";
     fetch(sheetURL)
      .then(res => res.json())
      .then(rows => {
        const tbody = document.getElementById("dokumentasiBody");
        tbody.innerHTML = ""; 
        const grouped = {};
        rows.forEach((row) => {
          const id = row["Id"];
          if (!grouped[id]) {
            grouped[id] = {
              judul: row["Judul Dokumentasi"] || "-",
              deskripsi: row["Deskripsi Dokumentasi"] || "-",
              files: []
            };
          }
          grouped[id].files.push(row["File Dokumentasi"]);
        });

        Object.keys(grouped).forEach((id) => {
          const data = grouped[id];
          const files = data.files;
          const tr = `
            <tr>
              <td class="text-center">${id}</td>
              <td>${data.judul}</td>
              <td>${data.deskripsi}</td>
              <td class="text-center">
                <a href="#" class="btn btn-primary btn-sm view-gallery" 
                   data-images='${JSON.stringify(files)}' 
                   title="${data.judul}">
                  <i class="fa fa-eye"></i> View
                </a>
              </td>
            </tr>
          `;
          tbody.insertAdjacentHTML("beforeend", tr);
        });

        const t = $('#dokumentasiTable').DataTable({
          paging: true,
          lengthChange: true,
          searching: true,
          ordering: true,
          info: true,
          autoWidth: false,
          pageLength: 10,
          columnDefs: [{ orderable: false, targets: 0 }]
        });

        t.on('order.dt search.dt draw.dt', function () {
          let i = 1;
          t.cells(null, 0, { search: 'applied', order: 'applied' })
            .every(function () { this.data(i++); });
        }).draw();
      })
      .catch(err => {
        console.error("Gagal ambil data:", err);
        document.getElementById("dokumentasiBody").innerHTML = `
          <tr><td colspan="4" class="text-center text-danger">Gagal memuat data</td></tr>`;
    });

    $(document).on('click', '.view-gallery', function(e) {
      e.preventDefault();
      const images = JSON.parse($(this).attr("data-images"));
      const items = images.map(url => ({ src: url, type: 'image' }));
      $.magnificPopup.open({
        items: items,
        type: 'image',
        gallery: {
          enabled: true
        },
        closeOnContentClick: true,
        mainClass: 'mfp-fade'
      });
   });

   const homeSheetURL = "https://opensheet.elk.sh/1HufG5kPt35_t_vdSoDIdoZ3GtZEtUnYw8tiNe_e2Ui0/Home";
   fetch(homeSheetURL)
    .then(res => res.json())
    .then(rows => {
      if(rows.length > 0){
        const data = rows[0];
        const footerDesc = data["Footer Description"] || "";
        const call = data["Call"] || "";
        const email = data["Email Address"] || "";
        const footerInfo = document.querySelector(".footer-info p");
        if (footerInfo) footerInfo.textContent = footerDesc;
        const footerPhone = document.querySelector(".footer-thumb p:nth-of-type(2)");
        const footerEmail = document.querySelector(".footer-thumb p:nth-of-type(3)");
        if (footerPhone) footerPhone.textContent = "Phone: " + call.replace("CALL US ", "");
        if (footerEmail) footerEmail.textContent = "Email: " + email;
      }
    })
  .catch(err => console.error("Gagal ambil data HOME:", err));
</script>
</body>
</html>